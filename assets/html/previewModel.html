<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>预览模型</title>
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      #div3d {
        width: 100%;
        height: 100%;
      }

      #btns {
        position: absolute;
        padding: 10px;
        top: 0;
        left: 0;

        z-index: 999;
      }

      button {
        width: 100px;
        height: 30px;
      }
    </style>
  </head>

  <body>
    <div id="btns">
      <button id="btn" onclick="capture()">生成截图</button>
      <button id="btn" onclick="view()">2D/3D</button>
    </div>
    <div id="div3d"></div>
  </body>
  <script src="../vendor/thingjs.min-V1.3.11.js"></script>
  <script>
    let app = new THING.App({
      background: 'black', // 背景颜色或图片
      skyBox: 'BlueSky', // 天空盒资源名称
    });

    app.create({
      type: 'Thing',
      id: '预览模型', // 物体 id
      name: '预览模型', // 物体名称
      url: 'https://model.3dmomoda.com/models/7fbb5bff56af4cf681b32daca3b8d71d/0/gltf/', // 模型地址
      position: [0, 0, 0], // 在世界坐标系下的位置
      complete: (ev) => {
        flyToModel(ev.object);
      },
    });

    /**
     * @Description: 摄像头飞行至模型
     * @return {*}
     */
    function flyToModel(object) {
      app.camera.flyTo({
        object,
        time: 2000,
      });
    }

    function capture() {
      const base64 = app.captureScreenshotToImage(1920, 1080, 'png', 1);
      // 将base图片下载到本地
      const a = document.createElement('a');
      a.href = base64;
      a.download = 'test.png';
      a.click();
    }

    function view() {
      var viewMode = app.camera.viewMode;
      if (viewMode == 'normal') {
        app.camera.viewMode = THING.CameraView.TopView; // 切换为2D视图
      } else {
        app.camera.viewMode = THING.CameraView.Normal; // 默认为3D视图
      }
    }
  </script>
</html>
